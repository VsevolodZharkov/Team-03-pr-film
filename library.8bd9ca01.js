!function(){function t(t){var e=localStorage.getItem(t);return JSON.parse(e)}function e(t,e){for(var a=20*(t-1),o=a+20,i=document.querySelector(".gallery"),r=JSON.parse(localStorage.getItem("genres")),s="",c=a;c<o;c++)c<e.length&&(s+='<li class="gallery__item" data-id="'.concat(e[c].id,'">\n                <article>\n                    <img class="article__image" src="').concat(e[c].poster_path?"https://image.tmdb.org/t/p/w500"+e[c].poster_path:"https://img.freepik.com/free-vector/error-404-concept-for-landing-page_52683-20173.jpg?w=2000",'" alt="').concat(e[c].title?e[c].title:e[c].original_title,'" width="280" loading="lazy">\n                    <h1 class="article__description">').concat(e[c].title?e[c].title:e[c].original_title,'</h1>\n                    <p class="article__description-orange">\n                        <span class="pseudo-element">\n                            ').concat(n(e[c].genre_ids,r).length>=3?n(e[c].genre_ids,r).slice(0,2).join(", ")+", Others...":n(e[c].genre_ids,r).join(", ")?n(e[c].genre_ids,r).join(", "):"NO DATA",'\n                        </span>\n                        <span class="article__description-year">\n                            ').concat(e[c].release_date?e[c].release_date.slice(0,4):"OUR ERA",'\n                        </span>\n                        <span class="modal__text-params-vote modal__text-params">\n                        ').concat(e[c].vote_average,"           \n                        </span>\n                    </p>\n                </article>\n            </li>"));i.innerHTML=s}function n(t,e){return t.map((function(t){return e.genres.filter((function(e){return e.id===t})).flatMap((function(t){return t.name}))}))}var a,o={pagContainer:document.querySelector(".js-pagination")};function i(t,e){if(t&&e&&1!==e){var n="",i=t-1,r=t-2,s=Number(t)+1,c=Number(t)+2;a=t,t>1&&(n+='<li class="pagination__item"><button class="previos">\n        &larr;</button>\n      </li>'),t>3&&(n+='<li class="pagination__item"><button class="pagination__btn">1</button></li>'),t>4&&(n+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),t>2&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(r,"</button></li>")),t>1&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(i,"</button></li>")),n+='<li class="pagination__item"><button class="pagination__btn active__btn">'.concat(t,"</button></li>"),s<=e&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(s,"</button></li>")),c<=e&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(c,"</button></li>")),e>t+3&&(n+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),e>t+2&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(e,"</button></li>")),e>t&&(n+='<li class="pagination__item"><button class="next">&rarr;</button></li>'),o.pagContainer.innerHTML=n}}function r(n,r){o.pagContainer.addEventListener("click",(function(o){if("BUTTON"!==o.target.nodeName||"..."===o.target.textContent)return;a=o.target.classList.contains("previos")?Number(a)-1:o.target.classList.contains("next")?Number(a)+1:Number(o.target.textContent);var s=t(r);i(a,n),e(a,s)}))}var s,c,l,d={openGallery:document.querySelector(".gallery"),closeBtn:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal__form"),article:document.querySelector(".modal__form-card"),body:document.querySelector("body")},u="";function m(e){l=e,s=t(e),d.openGallery.addEventListener("click",_)}function _(t){t.target.nodeName!==t.currentTarget.nodeName&&(c=t.target.closest("li").dataset.id,console.log(c),function(t,e){var a=t.filter((function(t){return t.id===Number(e)})),o=JSON.parse(localStorage.getItem("genres")),i=a[0],r=i.title,s=i.poster_path,c=i.overview,m=i.vote_average,_=i.vote_count,p=i.popularity,g=i.original_title;u='\n      <img\n        class="modal__form-img"\n        src="https://image.tmdb.org/t/p/w500'.concat(s,'"\n        alt=""\n      />\n      <div class="modal__descript">\n        <h2 class="modal__title">').concat(r,'</h2>\n\n        <table class="modal__descript-table">\n          <tbody>\n            <tr>\n              <td class="modal__text-properties">Vote / Votes</td>\n              <td class="modal__text-params">\n                <span class="modal__text-params-vote">').concat(m,'</span> /\n                <span class="modal__text-params-votes">').concat(_,'</span>\n              </td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Popularity</td>\n              <td class="modal__text-params">').concat(p,'</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Original Title</td>\n              <td class="modal__text-params">').concat(g,'</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Genre</td>\n              <td class="modal__text-params modal__text-low">').concat(n(a[0].genre_ids,o).join(", "),'</td>\n            </tr>\n          </tbody>\n        </table>\n        <h3 class="modal__descript-titel">About</h3>\n        <p class="modal__descript-text">\n          ').concat(c,'\n        </p>\n        <ul class="modal__button__list">\n          <li>\n            <button class="modal__button__item-watched" type="button">remove from Watched</button>\n          </li>\n          <li><button class="modal__button__item-queue" type="button">remove from queue</button></li>\n        </ul>\n      </div>\n  '),d.article.innerHTML=u;var b=document.querySelector(".modal__button__item-watched"),f=document.querySelector(".modal__button__item-queue");"queue"===l?(b.textContent="add to Watched",f.textContent="remove from queue",f.addEventListener("click",v),b.addEventListener("click",h)):(b.textContent="remove from Watched",f.textContent="add to queue",b.addEventListener("click",v),f.addEventListener("click",h))}(s,c),d.backdrop.classList.add("is-open"),d.body.classList.add("ishidden"),document.addEventListener("click",p),document.addEventListener("keydown",g))}function p(t){t.target===d.backdrop&&(d.backdrop.classList.remove("is-open"),d.body.classList.remove("ishidden"),b())}function g(t){"Escape"===t.code&&(d.backdrop.classList.remove("is-open"),d.body.classList.remove("ishidden"),b())}function b(){document.removeEventListener("keydown",g),document.removeEventListener("click",p)}function v(n){var a=t(l),o=a.findIndex((function(t){return t.id===Number(c)}));a.splice(o,1),localStorage.setItem(l,JSON.stringify(a)),e(1,a),d.backdrop.classList.remove("is-open"),0===a.length&&E()}function h(e){if("queue"===l){console.log("here queue");var n=t("watched");if(n.find((function(t){return t.id===Number(c)})))return;var a=t("queue").find((function(t){return t.id===Number(c)}));n.push(a),localStorage.setItem("watched",JSON.stringify(n)),console.log(e.target.textContent),e.target.textContent="added"}else if("watched"===l){console.log("here watch");var o=t("queue");if(o.find((function(t){return t.id===Number(c)})))return;var i=t("watched").find((function(t){return t.id===Number(c)}));o.push(i),localStorage.setItem("queue",JSON.stringify(o)),e.target.textContent="added"}}document.querySelector(".modal__btn").addEventListener("click",(function(t){t.preventDefault(),d.backdrop.classList.remove("is-open"),d.body.classList.remove("ishidden"),b()}));var f=document.querySelector(".js-watched"),y=document.querySelector(".js-queue");var q=document.querySelector(".js-watched"),L=document.querySelector(".js-queue");var S={btnWatched:document.querySelector(".js-watched"),btnQueue:document.querySelector(".js-queue"),gallery:document.querySelector(".gallery"),pagination:document.querySelector(".js-pagination")},x="queue";S.btnQueue.classList.add("is-active"),S.btnWatched.addEventListener("click",(function(){f.classList.add("is-active"),y.classList.remove("is-active"),E();var n=t("watched");if(n&&0!==n.length){var a=Math.ceil(n.length/20);e(1,n),i(1,a),r(a,"watched"),m("watched")}})),S.btnQueue.addEventListener("click",(function(){q.classList.remove("is-active"),L.classList.add("is-active"),E();var n=t("queue");if(n&&0!==n.length){var a=Math.ceil(n.length/20);e(1,n),i(1,a),r(a,"queue"),m("queue")}}));var w,k,N=t("queue");function E(){S.gallery.innerHTML='<li class="default">\n        <p class="message">Sorry, there is nothing here yet.</p>\n        <img\n          src="https://img.freepik.com/free-photo/awkward-girl-shrugging-shoulders-with-apologizing-face-expression-looking-clueless-say-sorry-showing-empty-hands-has-nothing-standing-over-white-background_176420-48867.jpg"\n          alt="Empty"\n        />\n      </li>'}N&&0!==N.length?(w=N,k=Math.ceil(w.length/20),e(1,w),i(1,k),r(k,x),m(x)):E()}();
//# sourceMappingURL=library.8bd9ca01.js.map
