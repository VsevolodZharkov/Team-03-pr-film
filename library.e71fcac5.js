function t(t,e,n,o){Object.defineProperty(t,e,{get:n,set:o,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},e.parcelRequired7c6=a),a.register("dutvw",(function(e,n){function o(t){const e=document.querySelector(".gallery"),n=JSON.parse(localStorage.getItem("genres")),o=t.map((t=>`<li class="gallery__item" data-id="${t.id}">\n                <article>\n                    <img class="article__image" src="${t.poster_path?"https://image.tmdb.org/t/p/w500"+t.poster_path:"https://img.freepik.com/free-vector/error-404-concept-for-landing-page_52683-20173.jpg?w=2000"}" alt="${t.title?t.title:t.original_title}" width="280" loading="lazy">\n                    <h1 class="article__description">${t.title?t.title:t.original_title}</h1>\n                    <p class="article__description-orange">\n                        <span class="pseudo-element">\n                            ${a(t.genre_ids,n).length>=3?a(t.genre_ids,n).slice(0,2).join(", ")+", Others...":a(t.genre_ids,n).join(", ")?a(t.genre_ids,n).join(", "):"NO DATA"}\n                        </span>\n                        <span>\n                            ${t.release_date?t.release_date.slice(0,4):"OUR ERA"}\n                        </span>\n                    </p>\n                </article>\n            </li>`)).join("");e.innerHTML=o}function a(t,e){return t.map((t=>e.genres.filter((e=>e.id===t)).flatMap((t=>t.name))))}t(e.exports,"createMarkUp",(function(){return o})),t(e.exports,"getGeneres",(function(){return a}))})),a.register("iWI2M",(function(e,n){t(e.exports,"getGenresPopfilms",(function(){return i}));var o=a("odBiE"),r=a("ahUPQ");async function i(){await(0,r.setupGenesToStorage)();return await(0,o.getTrendMovies)(1)}a("dutvw")})),a.register("odBiE",(function(e,n){t(e.exports,"getTrendMovies",(function(){return r}));var o=a("j59Rr");async function r(t){o.spiner.spin(document.querySelector(".gallery"));const e=new URLSearchParams({api_key:"7a4cd4317772102a9b88ef6a54b71590",page:t});return await fetch(`https://api.themoviedb.org/3/trending/movie/day?${e}`).then((t=>t.json()))}})),a.register("j59Rr",(function(e,n){t(e.exports,"spiner",(function(){return o}));const o=new(0,a("dCvm9").Spinner)({lines:18,length:5,width:2,radius:8,scale:2,corners:.6,speed:.9,rotate:22,animation:"spinner-line-fade-default",direction:-1,color:"#ff6b08",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"})})),a.register("dCvm9",(function(e,n){t(e.exports,"Spinner",(function(){return r}),(function(t){return r=t}));var o=function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},o.apply(this,arguments)},a={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},r=function(){function t(t){void 0===t&&(t={}),this.opts=o(o({},a),t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),i(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var n=Math.round(e.corners*e.width*500)/1e3+"px",o="none";!0===e.shadow?o="0 2px 4px #000":"string"==typeof e.shadow&&(o=e.shadow);for(var a=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],o=0,a=t.split(",");o<a.length;o++){var r=a[o].match(e);if(null!==r){var i=+r[2],s=+r[5],l=r[4],c=r[7];0!==i||l||(l=c),0!==s||c||(c=l),l===c&&n.push({prefix:r[1]||"",x:i,y:s,xUnits:l,yUnits:c,end:r[8]})}}return n}(o),r=0;r<e.lines;r++){var c=~~(360/e.lines*r+e.rotate),d=i(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:s(e.fadeColor,r),borderRadius:n,transformOrigin:"left",transform:"rotate("+c+"deg) translateX("+e.radius+"px)"}),u=r*e.direction/e.lines/e.speed;u-=1/e.speed;var p=i(document.createElement("div"),{width:"100%",height:"100%",background:s(e.color,r),borderRadius:n,boxShadow:l(a,c),animation:1/e.speed+"s linear "+u+"s infinite "+e.animation});d.appendChild(p),t.appendChild(d)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function i(t,e){for(var n in e)t.style[n]=e[n];return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t,e){for(var n=[],o=0,a=t;o<a.length;o++){var r=a[o],i=c(r.x,r.y,e);n.push(r.prefix+i[0]+r.xUnits+" "+i[1]+r.yUnits+r.end)}return n.join(", ")}function c(t,e,n){var o=n*Math.PI/180,a=Math.sin(o),r=Math.cos(o);return[Math.round(1e3*(t*r+e*a))/1e3,Math.round(1e3*(-t*a+e*r))/1e3]}})),a.register("ahUPQ",(function(e,n){t(e.exports,"setupGenesToStorage",(function(){return o}));function o(t){(async function(){const t=new URLSearchParams({api_key:"7a4cd4317772102a9b88ef6a54b71590"});return await fetch(`https://api.themoviedb.org/3/genre/movie/list?${t}`).then((t=>t.json()))})().then((t=>{localStorage.setItem("genres",JSON.stringify(t))}))}})),a.register("2me8K",(function(e,n){t(e.exports,"renderButtonsPag",(function(){return c}));var o=a("dutvw"),r=a("odBiE"),i=a("bfxWz");a("j59Rr");const s={pagContainer:document.querySelector(".js-pagination")};let l;function c(t,e,n){if(!t||!e||1===e)return;let o="";const a=t-1,r=t-2,i=Number(t)+1,c=Number(t)+2;l=t,t>1&&(o+='<li class="pagination__item"><button class="previos">\n        &larr;</button>\n      </li>'),t>3&&(o+='<li class="pagination__item"><button class="pagination__btn">1</button></li>'),t>4&&(o+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),t>2&&(o+=`<li class="pagination__item"><button class="pagination__btn">${r}</button></li>`),t>1&&(o+=`<li class="pagination__item"><button class="pagination__btn">${a}</button></li>`),o+=`<li class="pagination__item"><button class="pagination__btn active__btn">${t}</button></li>`,i<=e&&(o+=`<li class="pagination__item"><button class="pagination__btn">${i}</button></li>`),c<=e&&(o+=`<li class="pagination__item"><button class="pagination__btn">${c}</button></li>`),e>t+3&&(o+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),e>t+2&&(o+=`<li class="pagination__item"><button class="pagination__btn">${e}</button></li>`),e>t&&(o+='<li class="pagination__item"><button class="next">&rarr;</button></li>'),s.pagContainer.innerHTML=o}s.pagContainer.addEventListener("click",(function(t){if("BUTTON"!==t.target.nodeName||"..."===t.target.textContent)return;l=t.target.classList.contains("previos")?Number(l)-1:t.target.classList.contains("next")?Number(l)+1:Number(t.target.textContent);(0,r.getTrendMovies)(l).then((t=>{(0,o.createMarkUp)(t.results),c(l,t.total_pages),(0,i.showModal)(t)})).catch((t=>console.log(t))).finally((()=>{}))}))})),a.register("bfxWz",(function(e,n){t(e.exports,"showModal",(function(){return c}));var o=a("dutvw");const r={openGallery:document.querySelector(".gallery"),closeBtn:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal__form"),article:document.querySelector(".modal__form-card")};let i,s,l="";function c(t){i=t.results,r.openGallery.addEventListener("click",d)}function d(t){t.target.nodeName!==t.currentTarget.nodeName&&(s=t.target.closest("li").dataset.id,function(t,e){const n=t.filter((t=>t.id===Number(e))),a=JSON.parse(localStorage.getItem("genres")),{title:i,poster_path:s,overview:c,vote_average:d,vote_count:u,popularity:p,original_title:m}=n[0];l=`\n      <img\n        class="modal__form-img"\n        src="https://image.tmdb.org/t/p/w500${s}"\n        alt=""\n      />\n      <div class="modal__descript">\n        <h2 class="modal__title">${i}</h2>\n\n        <table class="modal__descript-table">\n          <tbody>\n            <tr>\n              <td class="modal__text-properties">Vote / Votes</td>\n              <td class="modal__text-params">\n                <span class="modal__text-params-vote">${d}</span> /\n                <span class="modal__text-params-votes">${u}</span>\n              </td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Popularity</td>\n              <td class="modal__text-params">${p}</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Original Title</td>\n              <td class="modal__text-params">${m}</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Genre</td>\n              <td class="modal__text-params modal__text-low">${(0,o.getGeneres)(n[0].genre_ids,a).join(", ")}</td>\n            </tr>\n          </tbody>\n        </table>\n        <h3 class="modal__descript-titel">About</h3>\n        <p class="modal__descript-text">\n          ${c}\n        </p>\n        <ul class="modal__button__list">\n          <li>\n            <button class="modal__button__item-watched" type="button">add to Watched</button>\n          </li>\n          <li><button class="modal__button__item-queue" type="button">add to queue</button></li>\n        </ul>\n      </div>\n  `,r.article.innerHTML=l;const _=document.querySelector(".modal__button__item-watched"),h=document.querySelector(".modal__button__item-queue");_.addEventListener("click",g),h.addEventListener("click",f)}(i,s),r.backdrop.classList.add("is-open"),document.addEventListener("click",u),document.addEventListener("keydown",p))}function u(t){t.target===r.backdrop&&(r.backdrop.classList.remove("is-open"),m())}function p(t){"Escape"===t.code&&(r.backdrop.classList.remove("is-open"),m())}function m(){document.removeEventListener("keydown",p),document.removeEventListener("click",u)}function g(t){console.log(t);_("watched",i.find((t=>t.id===Number(s)))),t.target.textContent="Dоne!"}function f(t){console.log(t);_("queue",i.find((t=>t.id===Number(s)))),t.target.textContent="Dоne!"}function _(t,e){if(localStorage.getItem(t)){const n=localStorage.getItem(t),o=JSON.parse(n),a=o.find((t=>t.id===e.id));console.log(a),a||(o.push(e),localStorage.setItem(t,JSON.stringify(o)))}else{const n=[];n.push(e),localStorage.setItem(t,JSON.stringify(n))}}document.querySelector(".modal__btn").addEventListener("click",(function(t){t.preventDefault(),r.backdrop.classList.remove("is-open"),m()}))})),a.register("7Th1V",(function(e,n){t(e.exports,"SeachByQuery",(function(){return p}));var o=a("1ZmQu"),r=a("dutvw"),i=a("2me8K"),s=a("bfxWz");a("j59Rr");const l=document.querySelector(".js-pagination"),c=document.querySelector(".page-header__form"),d=(document.querySelector(".gallery"),document.querySelector(".search"));let u;function p(){c.addEventListener("submit",m)}function m(t){if(t.preventDefault(),u=t.target.elements.text.value.trim(),""===u)return d.textContent="Search result not successful. Enter the correct movie name and try again",void setTimeout((()=>{d.textContent=""}),2e3);(0,o.searchMovies)(u,1).then((t=>{if(console.log(t),0===t.total_pages)return d.textContent="Search result not successful. Enter the correct movie name and try again",void setTimeout((()=>{d.textContent=""}),2e3);(0,r.createMarkUp)(t.results),(0,i.renderButtonsPag)(1,t.total_pages),l.addEventListener("click",g),(0,s.showModal)(t)})),t.target.reset()}function g(t){"BUTTON"===t.target.nodeName&&"..."!==t.target.textContent&&(t.target.classList.contains("previos")?currentPage=Number(currentPage)-1:t.target.classList.contains("next")?currentPage=Number(currentPage)+1:currentPage=Number(t.target.textContent),(0,o.searchMovies)(u,currentPage).then((t=>{(0,r.createMarkUp)(t.results),(0,i.renderButtonsPag)(currentPage,t.total_pages),(0,s.showModal)(t)})).catch((t=>console.log(t))).finally((()=>{})))}})),a.register("1ZmQu",(function(e,n){t(e.exports,"searchMovies",(function(){return o}));async function o(t,e){const n=new URLSearchParams({api_key:"7a4cd4317772102a9b88ef6a54b71590",page:e,query:t});return await fetch(`https://api.themoviedb.org/3/search/movie?${n}`).then((t=>t.json()))}}));
//# sourceMappingURL=library.e71fcac5.js.map
